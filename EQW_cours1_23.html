<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sophie Balech">
<meta name="dcterms.date" content="2023-09-19">

<title>Etudes qualitatives sur le web</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="EQW_cours1_23_files/libs/clipboard/clipboard.min.js"></script>
<script src="EQW_cours1_23_files/libs/quarto-html/quarto.js"></script>
<script src="EQW_cours1_23_files/libs/quarto-html/popper.min.js"></script>
<script src="EQW_cours1_23_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="EQW_cours1_23_files/libs/quarto-html/anchor.min.js"></script>
<link href="EQW_cours1_23_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="EQW_cours1_23_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="EQW_cours1_23_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="EQW_cours1_23_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="EQW_cours1_23_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="EQW_cours1_23_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="EQW_cours1_23_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Etudes qualitatives sur le web</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
            <p class="subtitle lead">Prise en main du logiciel et premières analyses</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Sophie Balech </p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              IAE Amiens - Université Picardie Jules Verne
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 19, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#les-données" id="toc-les-données" class="nav-link" data-scroll-target="#les-données"><span class="header-section-number">1.1</span> Les données</a></li>
  <li><a href="#premières-analyses-des-données" id="toc-premières-analyses-des-données" class="nav-link" data-scroll-target="#premières-analyses-des-données"><span class="header-section-number">1.2</span> Premières analyses des données</a></li>
  </ul></li>
  <li><a href="#création-du-corpus-et-premières-observations-du-corpus" id="toc-création-du-corpus-et-premières-observations-du-corpus" class="nav-link" data-scroll-target="#création-du-corpus-et-premières-observations-du-corpus"><span class="header-section-number">2</span> Création du corpus et premières observations du corpus</a></li>
  <li><a href="#nettoyage-du-corpus" id="toc-nettoyage-du-corpus" class="nav-link" data-scroll-target="#nettoyage-du-corpus"><span class="header-section-number">3</span> Nettoyage du corpus</a></li>
  <li><a href="#filtrer-le-corpus-des-termes-trop-fréquents" id="toc-filtrer-le-corpus-des-termes-trop-fréquents" class="nav-link" data-scroll-target="#filtrer-le-corpus-des-termes-trop-fréquents"><span class="header-section-number">4</span> Filtrer le corpus des termes trop fréquents</a></li>
  <li><a href="#la-loi-de-zipf" id="toc-la-loi-de-zipf" class="nav-link" data-scroll-target="#la-loi-de-zipf"><span class="header-section-number">5</span> La loi de Zipf</a></li>
  <li><a href="#mesures-de-fréquence" id="toc-mesures-de-fréquence" class="nav-link" data-scroll-target="#mesures-de-fréquence"><span class="header-section-number">6</span> Mesures de fréquence</a>
  <ul class="collapse">
  <li><a href="#pondération-tf-idf" id="toc-pondération-tf-idf" class="nav-link" data-scroll-target="#pondération-tf-idf"><span class="header-section-number">6.1</span> Pondération tf-idf</a></li>
  </ul></li>
  <li><a href="#comprendre-le-sens-des-termes" id="toc-comprendre-le-sens-des-termes" class="nav-link" data-scroll-target="#comprendre-le-sens-des-termes"><span class="header-section-number">7</span> Comprendre le sens des termes</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Le document de travail contient deux types d’éléments : du texte pour expliquer et présenter ce que l’on fait et du code pour réaliser les manipulations de données, les analyses et les graphiques. On commence toujours un document avec un bloc de code de setup, pour lister et charger les packages que l’on va utiliser et les options générales pour l’édition du document.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dans un premier temps, nous allons tout simplement charger la base de données de travail puis la décrire. Ensuite, nous créerons un corpus, le visualisons. Puis nous effectueront quelques analyses liminaires, avant de voir les pré-traitements à réaliser sur le corpus.</p>
<section id="les-données" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="les-données"><span class="header-section-number">1.1</span> Les données</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#On charge les données, stockées dans un fichier csv</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data_trustpilot_oiseaux.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "id"       "auteur"   "date"     "month"    "year"     "note"     "comments"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(data)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,388 × 7
      id auteur                   date            month    year  note comments  
   &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt;           &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     
 1     1 MAQUET Cyril             07 août 2023    août     2023     5 "Comme to…
 2     2 Mme Laurence  Wolff      08 août 2023    août     2023     5 "Le délai…
 3     3 Une nouvelle cliente     07 août 2023    août     2023     5 "Produits…
 4     4 Patricia ALLAMAN         15 août 2023    août     2023     5 "Envoi ra…
 5     5 VPL                      24 juillet 2023 juillet  2023     5 "Expéditi…
 6     6 PHILIPPE GODIN           08 août 2023    août     2023     5 "site sér…
 7     7 Mme MARIA ADILIA PEREIRA 15 août 2023    août     2023     1 "deux sem…
 8     8 Rachel Mattyssen         31 juillet 2023 juillet  2023     5 "Très bie…
 9     9 Estelle Fay              16 juillet 2023 juillet  2023     5 "Enfin un…
10    10 Mme T.                   06 août 2023    août     2023     4 "Satisfai…
# ℹ 4,378 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Résumé des données</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id          auteur              date              month          
 Min.   :   1   Length:4388        Length:4388        Length:4388       
 1st Qu.:1098   Class :character   Class :character   Class :character  
 Median :2194   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2194                                                           
 3rd Qu.:3291                                                           
 Max.   :4388                                                           
      year           note         comments        
 Min.   :2013   Min.   :1.000   Length:4388       
 1st Qu.:2018   1st Qu.:5.000   Class :character  
 Median :2020   Median :5.000   Mode  :character  
 Mean   :2019   Mean   :4.641                     
 3rd Qu.:2021   3rd Qu.:5.000                     
 Max.   :2023   Max.   :5.000                     </code></pre>
</div>
</div>
</section>
<section id="premières-analyses-des-données" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="premières-analyses-des-données"><span class="header-section-number">1.2</span> Premières analyses des données</h2>
<p>Avant de s’intéresser au contenu des commentaires, explorons la structure des données. On va regarder la distribution des commentaires et des notes dans le temps, et s’intéresser à la longueur des avis clients.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Les années </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>year<span class="ot">&lt;-</span><span class="fu">as.factor</span>(data<span class="sc">$</span>year)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 
 125  209  249  171  324  341  375  735  853  623  383 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year,prop))<span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span><span class="st">"purple"</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Les notes</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>note)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   5.000   5.000   4.641   5.000   5.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(data<span class="sc">$</span>note))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   1    2    3    4    5 
 116   62  169  589 3452 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">group_by</span>(note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(note,prop))<span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">2</span>, <span class="at">y=</span><span class="fl">0.7</span>, <span class="at">label=</span><span class="fu">paste</span>(<span class="st">"Note moyenne = "</span>,<span class="fu">round</span>(<span class="fu">mean</span>(data<span class="sc">$</span>note),<span class="dv">1</span>)))<span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis en fonction des notes"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"note"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Le nombre de caractère</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>nb_caractere<span class="ot">&lt;-</span><span class="fu">nchar</span>(data<span class="sc">$</span>comments) <span class="co">#on compte le nombre de caractère de chaque commentaire</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>nb_caractere)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   12.0    41.0    74.0   104.3   130.0  1571.0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(nb_caractere))<span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>,<span class="at">title =</span> <span class="st">"Nombre de caractères des avis"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Le nombre de tokens</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>nb_token<span class="ot">&lt;-</span><span class="fu">ntoken</span>(data<span class="sc">$</span>comments) <span class="co">#on compte le nombre de caractère de chaque commentaire</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>nb_token)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    2.0     7.0    13.0    19.3    24.0   308.0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(nb_token))<span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>,<span class="at">title =</span> <span class="st">"Nombre de tokens des avis"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Les notes dans le temps</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">note=</span><span class="fu">as.factor</span>(note))<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year, note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>() ,<span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop))<span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill=</span>note))<span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">type=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">note=</span><span class="fu">as.factor</span>(note))<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year, note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>note))<span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"fill"</span>,<span class="at">stat=</span><span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>note))<span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">type=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison de la répartition des notes dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/data_explor-6.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="création-du-corpus-et-premières-observations-du-corpus" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Création du corpus et premières observations du corpus</h1>
<p>Tout d’abord, nous transformons le jeu de données en corpus. La variable qui contient le texte est “comments”, les autres variables vont devenir des métadonnées du corpus, c’est-à-dire des variables associées à chaque texte. Cela sera utile par le suite pour faire des analyses comparatives entre les textes suivant différentes variables (le temps en particulier, mais pas seulement).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Création du corpus</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux<span class="ot">&lt;-</span><span class="fu">corpus</span>(data, <span class="at">text_field =</span> <span class="st">"comments"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 4,388 documents and 8 docvars.
text1 :
"Comme toujours, super service. Ne changez rien!(sauf peut êt..."

text2 :
"Le délai de ma commande super rapide Le délais des ma comman..."

text3 :
"Produits de qualité et équipe professionnelle … Très bon acc..."

text4 :
"Envoi rapide, bien emballé et conforme à l'annonce"

text5 :
"Expédition internationale ! J'ai récemment déménagé en Espag..."

text6 :
"site sérieux bon produit livraisons plus que correct mais pe..."

[ reached max_ndoc ... 4,382 more documents ]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux[<span class="st">"text600"</span>] <span class="co">#pour visualiser un texte précis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 1 document and 8 docvars.
text600 :
"Commande reçu dans les temps pas de surprise. Très bon site"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span>corpus_oiseaux[<span class="st">"text30"</span>]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ensuite, nous allons extraire de chaque texte les termes qui les composent. Ces termes sont nommés “token” (jeton), et comme vous pouvez le voir, ce ne sont pas uniquement des mots, mais tout caractère ou suite de caractères séparés des autres par un espace.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Extraction des tokens</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens</span>(corpus_oiseaux)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>tok[<span class="st">"text600"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tokens consisting of 1 document and 8 docvars.
text600 :
 [1] "Commande" "reçu"     "dans"     "les"      "temps"    "pas"     
 [7] "de"       "surprise" "."        "Très"     "bon"      "site"    </code></pre>
</div>
</div>
<p>Chaque texte est maintenant décomposé en une suite de tokens. Pour voir les termes les plus fréquents dans le corpus, ainsi que leur co-occurrences (apparition de deux termes en même temps), il convient de transformer l’objet tok en une matrice termes-documents. En ligne, tous les tokens identifiés, en ligne, tous les textes du corpus, et les valeurs correspondent au nombre d’occurrences (d’apparitions) de chaque token dans chaque document. Une particularité de cette matrice est qu’elle contient énormément de zéro.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transformation en document-term frequency matrix</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>dfm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 4,388 documents, 5,668 features (99.72% sparse) and 8 docvars.
       features
docs    comme toujours , super service . ne changez rien !
  text1     1        1 1     1       1 4  1       1    1 1
  text2     0        1 1     2       0 3  0       0    0 0
  text3     0        0 0     0       0 2  0       0    0 0
  text4     0        0 1     0       0 0  0       0    0 0
  text5     0        0 4     0       0 2  1       0    0 4
  text6     0        0 0     0       0 0  0       0    0 0
[ reached max_ndoc ... 4,382 more documents, reached max_nfeat ... 5,658 more features ]</code></pre>
</div>
</div>
<p>Enfin, nous pouvons avoir un aperçu des termes les plus fréquents. Nous les visualisons d’abord sous forme de tableau (les 20 tokens les plus fréquents), puis sous la forme d’un nuage de mots, où la taille des mots correspond à leur fréquence dans le corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Visualisation des termes les plus fréquents</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>) <span class="co">#les 20 premiers termes les plus fréquents</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     feature frequency rank docfreq group
1          .      4777    1    2094   all
2          ,      2788    2    1576   all
3         de      2685    3    1646   all
4         et      2529    4    1915   all
5       très      1996    5    1529   all
6     rapide      1656    6    1567   all
7         je      1622    7    1221   all
8  livraison      1412    8    1299   all
9          !      1349    9     649   all
10         à      1312   10    1022   all
11  commande      1238   11    1030   all
12        le      1215   12     812   all
13        la      1215   12     868   all
14      pour      1049   14     782   all
15       les      1013   15     754   all
16      bien       920   16     803   all
17        en       801   17     618   all
18      site       793   18     686   all
19  produits       738   19     661   all
20        un       729   20     565   all</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm) <span class="co">#nuage de mots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/0_viz-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Pour conclure sur cette première approche du corpus, nous voyons que nos analyses sont gếnées par la présence de la ponctuation et de plein de petits mots “vides de sens” (les articles par exemple). C’est pourquoi nous allons nettoyer le corpus pour avoir une meilleure vision de ce qu’il contient.</p>
</section>
<section id="nettoyage-du-corpus" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Nettoyage du corpus</h1>
<p>Le nettoyage du corpus pour les analyses se fait lors de la transformation en tokens. Nous allons ajouter des options pour supprimer la ponctuation, les chiffres et les stopwords (les mots qui n’apportent pas de sens sémantique mais permettent l’articulation du discours).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopwords</span>(<span class="st">"fr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "au"       "aux"      "avec"     "ce"       "ces"      "dans"    
  [7] "de"       "des"      "du"       "elle"     "en"       "et"      
 [13] "eux"      "il"       "je"       "la"       "le"       "leur"    
 [19] "lui"      "ma"       "mais"     "me"       "même"     "mes"     
 [25] "moi"      "mon"      "ne"       "nos"      "notre"    "nous"    
 [31] "on"       "ou"       "par"      "pas"      "pour"     "qu"      
 [37] "que"      "qui"      "sa"       "se"       "ses"      "son"     
 [43] "sur"      "ta"       "te"       "tes"      "toi"      "ton"     
 [49] "tu"       "un"       "une"      "vos"      "votre"    "vous"    
 [55] "c"        "d"        "j"        "l"        "à"        "m"       
 [61] "n"        "s"        "t"        "y"        "été"      "étée"    
 [67] "étées"    "étés"     "étant"    "suis"     "es"       "est"     
 [73] "sommes"   "êtes"     "sont"     "serai"    "seras"    "sera"    
 [79] "serons"   "serez"    "seront"   "serais"   "serait"   "serions" 
 [85] "seriez"   "seraient" "étais"    "était"    "étions"   "étiez"   
 [91] "étaient"  "fus"      "fut"      "fûmes"    "fûtes"    "furent"  
 [97] "sois"     "soit"     "soyons"   "soyez"    "soient"   "fusse"   
[103] "fusses"   "fût"      "fussions" "fussiez"  "fussent"  "ayant"   
[109] "eu"       "eue"      "eues"     "eus"      "ai"       "as"      
[115] "avons"    "avez"     "ont"      "aurai"    "auras"    "aura"    
[121] "aurons"   "aurez"    "auront"   "aurais"   "aurait"   "aurions" 
[127] "auriez"   "auraient" "avais"    "avait"    "avions"   "aviez"   
[133] "avaient"  "eut"      "eûmes"    "eûtes"    "eurent"   "aie"     
[139] "aies"     "ait"      "ayons"    "ayez"     "aient"    "eusse"   
[145] "eusses"   "eût"      "eussions" "eussiez"  "eussent"  "ceci"    
[151] "cela"     "celà"     "cet"      "cette"    "ici"      "ils"     
[157] "les"      "leurs"    "quel"     "quels"    "quelle"   "quelles" 
[163] "sans"     "soi"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens</span>(corpus_oiseaux, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"fr"</span>))</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux[<span class="st">"text600"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 1 document and 8 docvars.
text600 :
"Commande reçu dans les temps pas de surprise. Très bon site"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tok[<span class="st">"text600"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tokens consisting of 1 document and 8 docvars.
text600 :
[1] "Commande" "reçu"     "temps"    "surprise" "Très"     "bon"      "site"    </code></pre>
</div>
</div>
<p>Ensuite, on transforme en dfm et on visualise ce que ça donne.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>dfm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 4,388 documents, 5,440 features (99.81% sparse) and 8 docvars.
       features
docs    comme toujours super service changez rien sauf peut être là
  text1     1        1     1       1       1    1    1    1    1  1
  text2     0        1     2       0       0    0    0    0    0  1
  text3     0        0     0       0       0    0    0    0    0  0
  text4     0        0     0       0       0    0    0    0    0  0
  text5     0        0     0       0       0    0    0    0    0  0
  text6     0        0     0       0       0    0    0    0    0  0
[ reached max_ndoc ... 4,382 more documents, reached max_nfeat ... 5,430 more features ]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      feature frequency rank docfreq group
1        très      1996    1    1529   all
2      rapide      1656    2    1567   all
3   livraison      1412    3    1299   all
4    commande      1238    4    1030   all
5        bien       920    5     803   all
6        site       793    6     686   all
7    produits       738    7     661   all
8           a       706    8     566   all
9     produit       676    9     609   all
10        bon       639   10     575   all
11      merci       553   11     529   all
12 recommande       553   11     534   all
13    parfait       520   13     473   all
14    qualité       487   14     447   all
15       j'ai       382   15     289   all
16    oiseaux       379   16     319   all
17       tout       375   17     347   all
18       reçu       362   18     332   all
19      colis       360   19     313   all
20 rapidement       356   20     343   all</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/1_dfm-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>g<span class="ot">&lt;-</span><span class="fu">textstat_frequency</span>(dfm,<span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(g, <span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y=</span>frequency))<span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/1_dfm-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(g, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(feature, frequency), <span class="at">y=</span>frequency, <span class="at">fill=</span>frequency))<span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>, <span class="at">direction =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Les mots les plus fréquents"</span>,<span class="at">subtitle =</span> <span class="st">"du corpus Oiseaux Mania"</span>,<span class="at">caption =</span> <span class="st">"Source : Data TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Fréquence"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/1_dfm-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Globalement, la commande et la livraison sont TRÈS rapides et les produits sont bons. La surreprésentation de ces termes dans le corpus nous empêche de voir les thématiques abordées de manière moins évidentes. Nous avons plusieurs solutions qui s’offrent à nous : filtrer les mots trop fréquents du corpus ou nous intéresser à une autre mesure de la fréquence d’apparition. Nous allons d’abord filtrer le corpus.</p>
<p>On peut aussi vouloir remplacer des termes par d’autres, comme ici “produits” par “produit”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens_replace</span>(tok, <span class="st">"produits"</span>, <span class="st">"produit"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      feature frequency rank docfreq group
1        très      1996    1    1529   all
2      rapide      1656    2    1567   all
3     produit      1414    3    1243   all
4   livraison      1412    4    1299   all
5    commande      1238    5    1030   all
6        bien       920    6     803   all
7        site       793    7     686   all
8           a       706    8     566   all
9         bon       639    9     575   all
10      merci       553   10     529   all
11 recommande       553   10     534   all
12    parfait       520   12     473   all
13    qualité       487   13     447   all
14       j'ai       382   14     289   all
15    oiseaux       379   15     319   all
16       tout       375   16     347   all
17       reçu       362   17     332   all
18      colis       360   18     313   all
19 rapidement       356   19     343   all
20    service       351   20     325   all</code></pre>
</div>
</div>
</section>
<section id="filtrer-le-corpus-des-termes-trop-fréquents" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Filtrer le corpus des termes trop fréquents</h1>
<p>Nous allons filtrer les mots qui sont présents plus de 500 fois dans le corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>dfm_trim<span class="ot">&lt;-</span><span class="fu">dfm_trim</span>(dfm, <span class="at">max_termfreq =</span> <span class="dv">500</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm_trim, <span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      feature frequency rank docfreq group
1     qualité       487    1     447   all
2        j'ai       382    2     289   all
3     oiseaux       379    3     319   all
4        tout       375    4     347   all
5        reçu       362    5     332   all
6       colis       360    6     313   all
7  rapidement       356    7     343   all
8     service       351    8     325   all
9        prix       327    9     307   all
10 satisfaite       327    9     301   all
11      super       326   11     294   all
12   conforme       326   11     307   all
13       rien       317   13     299   all
14      bonne       293   14     277   all
15       plus       292   15     254   all
16       tres       278   16     216   all
17   toujours       274   17     236   all
18      mania       256   18     228   all
19      envoi       239   19     231   all
20    sérieux       232   20     220   all</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm_trim, <span class="at">max_words =</span> <span class="dv">100</span>, <span class="at">color =</span> <span class="fu">rev</span>(<span class="fu">brewer.pal</span>(<span class="dv">10</span>, <span class="st">"Spectral"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/1_filter-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># display.brewer.all()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Une autre manière de s’y prendre est d’éliminer directement les termes que l’on ne veut pas voir apparaître.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm,<span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      feature frequency rank docfreq group
1        très      1996    1    1529   all
2      rapide      1656    2    1567   all
3     produit      1414    3    1243   all
4   livraison      1412    4    1299   all
5    commande      1238    5    1030   all
6        bien       920    6     803   all
7        site       793    7     686   all
8           a       706    8     566   all
9         bon       639    9     575   all
10      merci       553   10     529   all
11 recommande       553   10     534   all
12    parfait       520   12     473   all
13    qualité       487   13     447   all
14       j'ai       382   14     289   all
15    oiseaux       379   15     319   all
16       tout       375   16     347   all
17       reçu       362   17     332   all
18      colis       360   18     313   all
19 rapidement       356   19     343   all
20    service       351   20     325   all</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>rem<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"très"</span>,<span class="st">"rapide"</span>,<span class="st">"produit"</span>,<span class="st">"livraison"</span>, <span class="st">"commande"</span>, <span class="st">"bien"</span>, <span class="st">"site"</span>, <span class="st">"a"</span>, <span class="st">"bon"</span>, <span class="st">"merci"</span>, <span class="st">"recommande"</span>,<span class="st">"parfait"</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>dfm_rem<span class="ot">&lt;-</span><span class="fu">dfm_remove</span>(dfm, rem)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm_rem, <span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      feature frequency rank docfreq group
1     qualité       487    1     447   all
2        j'ai       382    2     289   all
3     oiseaux       379    3     319   all
4        tout       375    4     347   all
5        reçu       362    5     332   all
6       colis       360    6     313   all
7  rapidement       356    7     343   all
8     service       351    8     325   all
9        prix       327    9     307   all
10 satisfaite       327    9     301   all
11      super       326   11     294   all
12   conforme       326   11     307   all
13       rien       317   13     299   all
14      bonne       293   14     277   all
15       plus       292   15     254   all
16       tres       278   16     216   all
17   toujours       274   17     236   all
18      mania       256   18     228   all
19      envoi       239   19     231   all
20    sérieux       232   20     220   all</code></pre>
</div>
</div>
</section>
<section id="la-loi-de-zipf" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> La loi de Zipf</h1>
<p>Vérifions la proposition de la loi de Zipf, selon laquelle la fréquence d’apparition d’un terme est inversement proportionnel à son rang.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>zipf<span class="ot">&lt;-</span><span class="fu">textstat_frequency</span>(dfm)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(zipf, <span class="fu">aes</span>(rank, frequency))<span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"darkgreen"</span>)<span class="sc">+</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()<span class="sc">+</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Observation de la loi de Zipf"</span>,<span class="at">x=</span><span class="st">"log (rang)"</span>,<span class="at">y=</span><span class="st">"log (fréquence)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/zipf_law-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mesures-de-fréquence" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Mesures de fréquence</h1>
<p>On s’est pour l’instant intéressé uniquement aux termes les plus fréquents dans un corpus. On a vu comment éliminer les termes trop fréquents pour qu’ils nous apportent de l’information. Pour l’analyse de topics, il nous faut prendre un autre angle d’attaque : afin de détecter les sujets abordés dans un corpus, on ne peut se contenter d’observer les mots les plus fréquents, il faut s’intéresser aux termes dont la fréquence dans l’ensemble du corpus est faible, mais qui contribuent fortement à différencier les éléments du corpus entre eux (les documents). On utilise pour cela une mesure de fréquence pondérée : la <em>tf-idf</em> pour <em>term frequency - inverse document frequency</em> qui permet d’accorder plus de poids aux termes les plus discriminants du corpus. <span class="math inline">\(tf-idf= \frac{occurrence\ du\ mot\ dans\ le\ document }{nombre\ de\ mots\ dans \ le \ document}* log (\frac{nombre\ de\ documents\ dans\ le\ corpus} {nombre\ de \ documents\ dans\ lequel\ le\ mot\ apparait})\)</span></p>
<section id="pondération-tf-idf" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="pondération-tf-idf"><span class="header-section-number">6.1</span> Pondération tf-idf</h2>
<p>On commence par reprendre nos manipulations précédentes : création de corpus, élimination des stopwords, constitution de bi- ou tri- grammes. On applique ensuite la pondération tf-idf.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>dfmtfidf<span class="ot">&lt;-</span><span class="fu">dfm_tfidf</span>(dfm)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>dfmtfidf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 4,388 documents, 5,439 features (99.81% sparse) and 8 docvars.
       features
docs       comme toujours    super  service  changez     rien     sauf     peut
  text1 1.406738 1.269355 1.173919 1.130383 3.040207 1.166595 2.320047 1.926263
  text2 0        1.269355 2.347839 0        0        0        0        0       
  text3 0        0        0        0        0        0        0        0       
  text4 0        0        0        0        0        0        0        0       
  text5 0        0        0        0        0        0        0        0       
  text6 0        0        0        0        0        0        0        0       
       features
docs        être       là
  text1 1.961025 2.320047
  text2 0        2.320047
  text3 0        0       
  text4 0        0       
  text5 0        0       
  text6 0        0       
[ reached max_ndoc ... 4,382 more documents, reached max_nfeat ... 5,429 more features ]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Représentations graphiques</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm, <span class="at">max_words =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/tf-idf-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfmtfidf, <span class="at">max_words =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/tf-idf-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#On filtre les mots trop fréquents</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>dfm_trim<span class="ot">&lt;-</span><span class="fu">dfm_trim</span>(dfm, <span class="at">max_termfreq =</span> <span class="dv">500</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>dfmtfidf_trim<span class="ot">&lt;-</span><span class="fu">dfm_tfidf</span>(dfm_trim)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm_trim, <span class="at">max_words =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/tf-idf-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfmtfidf_trim, <span class="at">max_words =</span> <span class="dv">200</span>, <span class="at">color =</span> <span class="fu">brewer.pal</span>(<span class="dv">6</span>, <span class="st">"Set2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/tf-idf-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="EQW_cours1_23_files/figure-html/tf-idf-5.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="comprendre-le-sens-des-termes" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Comprendre le sens des termes</h1>
<p>On peut visualiser un ou plusieurs termes dans leur contexte, afin d’avoir une meilleure compréhension de leur sens. Pour cela on utilise la fonction “kwic” pour key word in context, à partir de l’objet tokens :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"livraison"</span>,<span class="at">window =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                     
  [text2, 12] revanche n’arrive cliquer | livraison |
  [text3, 13]    depuis conseil jusqu'à | livraison |
  [text5, 36]  perfection puisque délai | livraison |
  [text8, 14]    a entière satisfaction | livraison |
  [text14, 1]                           | Livraison |
 [text15, 21]         trouve peut frais | livraison |
                            
 adresse toujours là        
 produit recommande vivement
 Espagne depuis France      
 aussi a rapide             
 rapide soignée Bons        
 élevé                      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok, <span class="fu">c</span>(<span class="st">"commande"</span>, <span class="st">"recommande"</span>),<span class="at">window =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                                            
  [text2, 2]                     délai |  commande  | super rapide délais   
  [text2, 6]       super rapide délais |  commande  | super rapide revanche 
 [text3, 15] jusqu'à livraison produit | recommande | vivement oiseaux Mania
 [text5, 14]   Food regardant dernière |  commande  | j'avais faite France  
  [text7, 5]       semaines j'ai passé |  commande  | toujours livré étoile 
  [text8, 9]       j'ai néanmoins fait |  commande  | difficulté a entière  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"perroquet"</span>,<span class="at">window =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                      
  [text5, 51]    d'avoir trouvé solution | perroquet |
  [text18, 8]        compétent sers site | perroquet |
 [text22, 18]         convient tout fait | perroquet |
  [text34, 6] treats granulés compressés | Perroquet |
 [text37, 10]        choix produit petit | perroquet |
  [text39, 2]               Alimentation | perroquet |
                              
 afin qu'il puisse            
  😊 Excellent rapide          
 très heureux aussi           
 Gris Gabon très              
 n'hésiterai refaire commandes
 commande depuis quelques     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"prix"</span>,<span class="at">window=</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.             
  [text14, 6]
 [text15, 15]
 [text26, 23]
 [text28, 12]
 [text31, 77]
  [text32, 7]
                                                                                     
                                                Livraison rapide soignée Bons produit
            rapide satisfait commander cher oiseaux mania car Besançon trouve produit
 beaucoup choix graines friandises accessoires commande a livrée rapidement encombres
      harnais reçus déplore juste l’emballage spartiate arrivé moitié déchiré rapport
                           flacons 57gr chacun ça fait peut chère Mondial relay offre
                                           Livraison rapide Bons produit bien emballé
                                                          
 | prix | raisonnables                                    
 | Prix | très attractif trouve peut frais livraison élevé
 | Prix | intéressant                                     
 | prix | vente c’est peu léger surtout harnais           
 | prix | bien plus raisonnable Bien cordialement         
 | prix | raisonnables                                    </code></pre>
</div>
</div>
<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Copyright</h2><div id="quarto-copyright" class="quarto-appendix-contents"><div>(C) EQW SB23-24</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb75" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Etudes qualitatives sur le web"</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Prise en main du logiciel et premières analyses"</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "last-modified"</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">  name: Sophie Balech</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co">  email: sophie.balech@u-picardie.fr</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co">  affiliation: IAE Amiens - Université Picardie Jules Verne</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="an">license:</span><span class="co"> "CC BY"</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="an">copyright:</span><span class="co"> "(C) EQW SB23-24"</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="co">    theme:</span></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co">      light: yeti</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co">      dark: darkly</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a>Le document de travail contient deux types d'éléments : du texte pour expliquer et présenter ce que l'on fait et du code pour réaliser les manipulations de données, les analyses et les graphiques. On commence toujours un document avec un bloc de code de setup, pour lister et charger les packages que l'on va utiliser et les options générales pour l'édition du document.</span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-32"><a href="#cb75-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=TRUE,output=FALSE}</span></span>
<span id="cb75-33"><a href="#cb75-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb75-34"><a href="#cb75-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb75-35"><a href="#cb75-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb75-36"><a href="#cb75-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb75-37"><a href="#cb75-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb75-38"><a href="#cb75-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb75-39"><a href="#cb75-39" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-40"><a href="#cb75-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-41"><a href="#cb75-41" aria-hidden="true" tabindex="-1"></a>Dans un premier temps, nous allons tout simplement charger la base de données de travail puis la décrire. Ensuite, nous créerons un corpus, le visualisons. Puis nous effectueront quelques analyses liminaires, avant de voir les pré-traitements à réaliser sur le corpus.</span>
<span id="cb75-42"><a href="#cb75-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-43"><a href="#cb75-43" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les données</span></span>
<span id="cb75-44"><a href="#cb75-44" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data}</span></span>
<span id="cb75-45"><a href="#cb75-45" aria-hidden="true" tabindex="-1"></a><span class="co">#On charge les données, stockées dans un fichier csv</span></span>
<span id="cb75-46"><a href="#cb75-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-47"><a href="#cb75-47" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data_trustpilot_oiseaux.csv"</span>)</span>
<span id="cb75-48"><a href="#cb75-48" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span>
<span id="cb75-49"><a href="#cb75-49" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(data)</span>
<span id="cb75-50"><a href="#cb75-50" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb75-51"><a href="#cb75-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-52"><a href="#cb75-52" aria-hidden="true" tabindex="-1"></a><span class="co">#Résumé des données</span></span>
<span id="cb75-53"><a href="#cb75-53" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span>
<span id="cb75-54"><a href="#cb75-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-55"><a href="#cb75-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-56"><a href="#cb75-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-57"><a href="#cb75-57" aria-hidden="true" tabindex="-1"></a><span class="fu">## Premières analyses des données</span></span>
<span id="cb75-58"><a href="#cb75-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-59"><a href="#cb75-59" aria-hidden="true" tabindex="-1"></a>Avant de s'intéresser au contenu des commentaires, explorons la structure des données. On va regarder la distribution des commentaires et des notes dans le temps, et s'intéresser à la longueur des avis clients.</span>
<span id="cb75-60"><a href="#cb75-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-61"><a href="#cb75-61" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data_explor, message=FALSE}</span></span>
<span id="cb75-62"><a href="#cb75-62" aria-hidden="true" tabindex="-1"></a><span class="co">#Les années </span></span>
<span id="cb75-63"><a href="#cb75-63" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>year<span class="ot">&lt;-</span><span class="fu">as.factor</span>(data<span class="sc">$</span>year)</span>
<span id="cb75-64"><a href="#cb75-64" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>year)</span>
<span id="cb75-65"><a href="#cb75-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-66"><a href="#cb75-66" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb75-67"><a href="#cb75-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year,prop))<span class="sc">+</span></span>
<span id="cb75-68"><a href="#cb75-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span><span class="st">"purple"</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb75-69"><a href="#cb75-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb75-70"><a href="#cb75-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-71"><a href="#cb75-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span>
<span id="cb75-72"><a href="#cb75-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-73"><a href="#cb75-73" aria-hidden="true" tabindex="-1"></a><span class="co">#Les notes</span></span>
<span id="cb75-74"><a href="#cb75-74" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>note)</span>
<span id="cb75-75"><a href="#cb75-75" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(data<span class="sc">$</span>note))</span>
<span id="cb75-76"><a href="#cb75-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-77"><a href="#cb75-77" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">group_by</span>(note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb75-78"><a href="#cb75-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(note,prop))<span class="sc">+</span></span>
<span id="cb75-79"><a href="#cb75-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb75-80"><a href="#cb75-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">2</span>, <span class="at">y=</span><span class="fl">0.7</span>, <span class="at">label=</span><span class="fu">paste</span>(<span class="st">"Note moyenne = "</span>,<span class="fu">round</span>(<span class="fu">mean</span>(data<span class="sc">$</span>note),<span class="dv">1</span>)))<span class="sc">+</span></span>
<span id="cb75-81"><a href="#cb75-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb75-82"><a href="#cb75-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-83"><a href="#cb75-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis en fonction des notes"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"note"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span>
<span id="cb75-84"><a href="#cb75-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-85"><a href="#cb75-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-86"><a href="#cb75-86" aria-hidden="true" tabindex="-1"></a><span class="co">#Le nombre de caractère</span></span>
<span id="cb75-87"><a href="#cb75-87" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>nb_caractere<span class="ot">&lt;-</span><span class="fu">nchar</span>(data<span class="sc">$</span>comments) <span class="co">#on compte le nombre de caractère de chaque commentaire</span></span>
<span id="cb75-88"><a href="#cb75-88" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>nb_caractere)</span>
<span id="cb75-89"><a href="#cb75-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-90"><a href="#cb75-90" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(nb_caractere))<span class="sc">+</span></span>
<span id="cb75-91"><a href="#cb75-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb75-92"><a href="#cb75-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb75-93"><a href="#cb75-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>,<span class="at">title =</span> <span class="st">"Nombre de caractères des avis"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb75-94"><a href="#cb75-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-95"><a href="#cb75-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb75-96"><a href="#cb75-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-97"><a href="#cb75-97" aria-hidden="true" tabindex="-1"></a><span class="co">#Le nombre de tokens</span></span>
<span id="cb75-98"><a href="#cb75-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-99"><a href="#cb75-99" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>nb_token<span class="ot">&lt;-</span><span class="fu">ntoken</span>(data<span class="sc">$</span>comments) <span class="co">#on compte le nombre de caractère de chaque commentaire</span></span>
<span id="cb75-100"><a href="#cb75-100" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>nb_token)</span>
<span id="cb75-101"><a href="#cb75-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-102"><a href="#cb75-102" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(nb_token))<span class="sc">+</span></span>
<span id="cb75-103"><a href="#cb75-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb75-104"><a href="#cb75-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb75-105"><a href="#cb75-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>,<span class="at">title =</span> <span class="st">"Nombre de tokens des avis"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb75-106"><a href="#cb75-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-107"><a href="#cb75-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb75-108"><a href="#cb75-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-109"><a href="#cb75-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-110"><a href="#cb75-110" aria-hidden="true" tabindex="-1"></a><span class="co">#Les notes dans le temps</span></span>
<span id="cb75-111"><a href="#cb75-111" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">note=</span><span class="fu">as.factor</span>(note))<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year, note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>() ,<span class="at">prop=</span>n<span class="sc">/</span><span class="fu">nrow</span>(data))<span class="sc">%&gt;%</span></span>
<span id="cb75-112"><a href="#cb75-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop))<span class="sc">+</span></span>
<span id="cb75-113"><a href="#cb75-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill=</span>note))<span class="sc">+</span></span>
<span id="cb75-114"><a href="#cb75-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">type=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb75-115"><a href="#cb75-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb75-116"><a href="#cb75-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-117"><a href="#cb75-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des avis dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span>
<span id="cb75-118"><a href="#cb75-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-119"><a href="#cb75-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-120"><a href="#cb75-120" aria-hidden="true" tabindex="-1"></a>data<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">note=</span><span class="fu">as.factor</span>(note))<span class="sc">%&gt;%</span><span class="fu">group_by</span>(year, note)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb75-121"><a href="#cb75-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>note))<span class="sc">+</span></span>
<span id="cb75-122"><a href="#cb75-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"fill"</span>,<span class="at">stat=</span><span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>note))<span class="sc">+</span></span>
<span id="cb75-123"><a href="#cb75-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">type=</span><span class="fu">c</span>(<span class="st">"red"</span>,<span class="st">"pink"</span>,<span class="st">"orange"</span>,<span class="st">"gold"</span>,<span class="st">"lightgreen"</span>))<span class="sc">+</span></span>
<span id="cb75-124"><a href="#cb75-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb75-125"><a href="#cb75-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb75-126"><a href="#cb75-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison de la répartition des notes dans le temps"</span>, <span class="at">subtitle =</span> <span class="st">"Corpus Oiseaux Mania"</span>, <span class="at">caption=</span><span class="st">"Data : TrustPilot"</span>, <span class="at">x=</span><span class="st">"années"</span>, <span class="at">y=</span><span class="cn">NULL</span>)</span>
<span id="cb75-127"><a href="#cb75-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-128"><a href="#cb75-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-129"><a href="#cb75-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-130"><a href="#cb75-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-131"><a href="#cb75-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-132"><a href="#cb75-132" aria-hidden="true" tabindex="-1"></a><span class="fu"># Création du corpus et premières observations du corpus</span></span>
<span id="cb75-133"><a href="#cb75-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-134"><a href="#cb75-134" aria-hidden="true" tabindex="-1"></a>Tout d'abord, nous transformons le jeu de données en corpus. La variable qui contient le texte est "comments", les autres variables vont devenir des métadonnées du corpus, c'est-à-dire des variables associées à chaque texte. Cela sera utile par le suite pour faire des analyses comparatives entre les textes suivant différentes variables (le temps en particulier, mais pas seulement).</span>
<span id="cb75-135"><a href="#cb75-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-136"><a href="#cb75-136" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 0_corpus}</span></span>
<span id="cb75-137"><a href="#cb75-137" aria-hidden="true" tabindex="-1"></a><span class="co">#Création du corpus</span></span>
<span id="cb75-138"><a href="#cb75-138" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux<span class="ot">&lt;-</span><span class="fu">corpus</span>(data, <span class="at">text_field =</span> <span class="st">"comments"</span>)</span>
<span id="cb75-139"><a href="#cb75-139" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux</span>
<span id="cb75-140"><a href="#cb75-140" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux[<span class="st">"text600"</span>] <span class="co">#pour visualiser un texte précis</span></span>
<span id="cb75-141"><a href="#cb75-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-142"><a href="#cb75-142" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span>corpus_oiseaux[<span class="st">"text30"</span>]</span>
<span id="cb75-143"><a href="#cb75-143" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(a)</span>
<span id="cb75-144"><a href="#cb75-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-145"><a href="#cb75-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-146"><a href="#cb75-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-147"><a href="#cb75-147" aria-hidden="true" tabindex="-1"></a>Ensuite, nous allons extraire de chaque texte les termes qui les composent. Ces termes sont nommés "token" (jeton), et comme vous pouvez le voir, ce ne sont pas uniquement des mots, mais tout caractère ou suite de caractères séparés des autres par un espace.</span>
<span id="cb75-148"><a href="#cb75-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-149"><a href="#cb75-149" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 0_tokens}</span></span>
<span id="cb75-150"><a href="#cb75-150" aria-hidden="true" tabindex="-1"></a><span class="co">#Extraction des tokens</span></span>
<span id="cb75-151"><a href="#cb75-151" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens</span>(corpus_oiseaux)</span>
<span id="cb75-152"><a href="#cb75-152" aria-hidden="true" tabindex="-1"></a>tok[<span class="st">"text600"</span>]</span>
<span id="cb75-153"><a href="#cb75-153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-154"><a href="#cb75-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-155"><a href="#cb75-155" aria-hidden="true" tabindex="-1"></a>Chaque texte est maintenant décomposé en une suite de tokens. Pour voir les termes les plus fréquents dans le corpus, ainsi que leur co-occurrences (apparition de deux termes en même temps), il convient de transformer l'objet tok en une matrice termes-documents. En ligne, tous les tokens identifiés, en ligne, tous les textes du corpus, et les valeurs correspondent au nombre d'occurrences (d'apparitions) de chaque token dans chaque document. Une particularité de cette matrice est qu'elle contient énormément de zéro.</span>
<span id="cb75-156"><a href="#cb75-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-157"><a href="#cb75-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 0_dfm}</span></span>
<span id="cb75-158"><a href="#cb75-158" aria-hidden="true" tabindex="-1"></a><span class="co">#Transformation en document-term frequency matrix</span></span>
<span id="cb75-159"><a href="#cb75-159" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb75-160"><a href="#cb75-160" aria-hidden="true" tabindex="-1"></a>dfm</span>
<span id="cb75-161"><a href="#cb75-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-162"><a href="#cb75-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-163"><a href="#cb75-163" aria-hidden="true" tabindex="-1"></a>Enfin, nous pouvons avoir un aperçu des termes les plus fréquents. Nous les visualisons d'abord sous forme de tableau (les 20 tokens les plus fréquents), puis sous la forme d'un nuage de mots, où la taille des mots correspond à leur fréquence dans le corpus.</span>
<span id="cb75-164"><a href="#cb75-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-165"><a href="#cb75-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 0_viz}</span></span>
<span id="cb75-166"><a href="#cb75-166" aria-hidden="true" tabindex="-1"></a><span class="co">#Visualisation des termes les plus fréquents</span></span>
<span id="cb75-167"><a href="#cb75-167" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>) <span class="co">#les 20 premiers termes les plus fréquents</span></span>
<span id="cb75-168"><a href="#cb75-168" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm) <span class="co">#nuage de mots</span></span>
<span id="cb75-169"><a href="#cb75-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-170"><a href="#cb75-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-171"><a href="#cb75-171" aria-hidden="true" tabindex="-1"></a>Pour conclure sur cette première approche du corpus, nous voyons que nos analyses sont gếnées par la présence de la ponctuation et de plein de petits mots "vides de sens" (les articles par exemple). C'est pourquoi nous allons nettoyer le corpus pour avoir une meilleure vision de ce qu'il contient.</span>
<span id="cb75-172"><a href="#cb75-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-173"><a href="#cb75-173" aria-hidden="true" tabindex="-1"></a><span class="fu"># Nettoyage du corpus</span></span>
<span id="cb75-174"><a href="#cb75-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-175"><a href="#cb75-175" aria-hidden="true" tabindex="-1"></a>Le nettoyage du corpus pour les analyses se fait lors de la transformation en tokens. Nous allons ajouter des options pour supprimer la ponctuation, les chiffres et les stopwords (les mots qui n'apportent pas de sens sémantique mais permettent l'articulation du discours).</span>
<span id="cb75-176"><a href="#cb75-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-177"><a href="#cb75-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 1_tok}</span></span>
<span id="cb75-178"><a href="#cb75-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-179"><a href="#cb75-179" aria-hidden="true" tabindex="-1"></a><span class="fu">stopwords</span>(<span class="st">"fr"</span>)</span>
<span id="cb75-180"><a href="#cb75-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-181"><a href="#cb75-181" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens</span>(corpus_oiseaux, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb75-182"><a href="#cb75-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"fr"</span>))</span>
<span id="cb75-183"><a href="#cb75-183" aria-hidden="true" tabindex="-1"></a>corpus_oiseaux[<span class="st">"text600"</span>]</span>
<span id="cb75-184"><a href="#cb75-184" aria-hidden="true" tabindex="-1"></a>tok[<span class="st">"text600"</span>]</span>
<span id="cb75-185"><a href="#cb75-185" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-186"><a href="#cb75-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-187"><a href="#cb75-187" aria-hidden="true" tabindex="-1"></a>Ensuite, on transforme en dfm et on visualise ce que ça donne.</span>
<span id="cb75-188"><a href="#cb75-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-189"><a href="#cb75-189" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 1_dfm}</span></span>
<span id="cb75-190"><a href="#cb75-190" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb75-191"><a href="#cb75-191" aria-hidden="true" tabindex="-1"></a>dfm</span>
<span id="cb75-192"><a href="#cb75-192" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-193"><a href="#cb75-193" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm)</span>
<span id="cb75-194"><a href="#cb75-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-195"><a href="#cb75-195" aria-hidden="true" tabindex="-1"></a>g<span class="ot">&lt;-</span><span class="fu">textstat_frequency</span>(dfm,<span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-196"><a href="#cb75-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-197"><a href="#cb75-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-198"><a href="#cb75-198" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(g, <span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y=</span>frequency))<span class="sc">+</span></span>
<span id="cb75-199"><a href="#cb75-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb75-200"><a href="#cb75-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb75-201"><a href="#cb75-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-202"><a href="#cb75-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-203"><a href="#cb75-203" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(g, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(feature, frequency), <span class="at">y=</span>frequency, <span class="at">fill=</span>frequency))<span class="sc">+</span></span>
<span id="cb75-204"><a href="#cb75-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb75-205"><a href="#cb75-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb75-206"><a href="#cb75-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-207"><a href="#cb75-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>, <span class="at">direction =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb75-208"><a href="#cb75-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Les mots les plus fréquents"</span>,<span class="at">subtitle =</span> <span class="st">"du corpus Oiseaux Mania"</span>,<span class="at">caption =</span> <span class="st">"Source : Data TrustPilot"</span>)<span class="sc">+</span></span>
<span id="cb75-209"><a href="#cb75-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb75-210"><a href="#cb75-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Fréquence"</span>)</span>
<span id="cb75-211"><a href="#cb75-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-212"><a href="#cb75-212" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-213"><a href="#cb75-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-214"><a href="#cb75-214" aria-hidden="true" tabindex="-1"></a>Globalement, la commande et la livraison sont TRÈS rapides et les produits sont bons. La surreprésentation de ces termes dans le corpus nous empêche de voir les thématiques abordées de manière moins évidentes. Nous avons plusieurs solutions qui s'offrent à nous : filtrer les mots trop fréquents du corpus ou nous intéresser à une autre mesure de la fréquence d'apparition. Nous allons d'abord filtrer le corpus.</span>
<span id="cb75-215"><a href="#cb75-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-216"><a href="#cb75-216" aria-hidden="true" tabindex="-1"></a>On peut aussi vouloir remplacer des termes par d'autres, comme ici "produits" par "produit".</span>
<span id="cb75-217"><a href="#cb75-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-218"><a href="#cb75-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r tok_replace}</span></span>
<span id="cb75-219"><a href="#cb75-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-220"><a href="#cb75-220" aria-hidden="true" tabindex="-1"></a>tok<span class="ot">&lt;-</span><span class="fu">tokens_replace</span>(tok, <span class="st">"produits"</span>, <span class="st">"produit"</span>)</span>
<span id="cb75-221"><a href="#cb75-221" aria-hidden="true" tabindex="-1"></a>dfm<span class="ot">&lt;-</span><span class="fu">dfm</span>(tok)</span>
<span id="cb75-222"><a href="#cb75-222" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm, <span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-223"><a href="#cb75-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-224"><a href="#cb75-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-225"><a href="#cb75-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-226"><a href="#cb75-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-227"><a href="#cb75-227" aria-hidden="true" tabindex="-1"></a><span class="fu"># Filtrer le corpus des termes trop fréquents</span></span>
<span id="cb75-228"><a href="#cb75-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-229"><a href="#cb75-229" aria-hidden="true" tabindex="-1"></a>Nous allons filtrer les mots qui sont présents plus de 500 fois dans le corpus.</span>
<span id="cb75-230"><a href="#cb75-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-231"><a href="#cb75-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 1_filter}</span></span>
<span id="cb75-232"><a href="#cb75-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-233"><a href="#cb75-233" aria-hidden="true" tabindex="-1"></a>dfm_trim<span class="ot">&lt;-</span><span class="fu">dfm_trim</span>(dfm, <span class="at">max_termfreq =</span> <span class="dv">500</span>)</span>
<span id="cb75-234"><a href="#cb75-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-235"><a href="#cb75-235" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm_trim, <span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-236"><a href="#cb75-236" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm_trim, <span class="at">max_words =</span> <span class="dv">100</span>, <span class="at">color =</span> <span class="fu">rev</span>(<span class="fu">brewer.pal</span>(<span class="dv">10</span>, <span class="st">"Spectral"</span>)))</span>
<span id="cb75-237"><a href="#cb75-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-238"><a href="#cb75-238" aria-hidden="true" tabindex="-1"></a><span class="co"># display.brewer.all()</span></span>
<span id="cb75-239"><a href="#cb75-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-240"><a href="#cb75-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-241"><a href="#cb75-241" aria-hidden="true" tabindex="-1"></a>Une autre manière de s'y prendre est d'éliminer directement les termes que l'on ne veut pas voir apparaître.</span>
<span id="cb75-242"><a href="#cb75-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-243"><a href="#cb75-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 1_filter2}</span></span>
<span id="cb75-244"><a href="#cb75-244" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm,<span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-245"><a href="#cb75-245" aria-hidden="true" tabindex="-1"></a>rem<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"très"</span>,<span class="st">"rapide"</span>,<span class="st">"produit"</span>,<span class="st">"livraison"</span>, <span class="st">"commande"</span>, <span class="st">"bien"</span>, <span class="st">"site"</span>, <span class="st">"a"</span>, <span class="st">"bon"</span>, <span class="st">"merci"</span>, <span class="st">"recommande"</span>,<span class="st">"parfait"</span>)</span>
<span id="cb75-246"><a href="#cb75-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-247"><a href="#cb75-247" aria-hidden="true" tabindex="-1"></a>dfm_rem<span class="ot">&lt;-</span><span class="fu">dfm_remove</span>(dfm, rem)</span>
<span id="cb75-248"><a href="#cb75-248" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(dfm_rem, <span class="at">n=</span><span class="dv">20</span>)</span>
<span id="cb75-249"><a href="#cb75-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-250"><a href="#cb75-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-251"><a href="#cb75-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-252"><a href="#cb75-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-253"><a href="#cb75-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-254"><a href="#cb75-254" aria-hidden="true" tabindex="-1"></a><span class="fu"># La loi de Zipf</span></span>
<span id="cb75-255"><a href="#cb75-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-256"><a href="#cb75-256" aria-hidden="true" tabindex="-1"></a>Vérifions la proposition de la loi de Zipf, selon laquelle la fréquence d'apparition d'un terme est inversement proportionnel à son rang.</span>
<span id="cb75-257"><a href="#cb75-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-258"><a href="#cb75-258" aria-hidden="true" tabindex="-1"></a><span class="in">```{r zipf_law}</span></span>
<span id="cb75-259"><a href="#cb75-259" aria-hidden="true" tabindex="-1"></a>zipf<span class="ot">&lt;-</span><span class="fu">textstat_frequency</span>(dfm)</span>
<span id="cb75-260"><a href="#cb75-260" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(zipf, <span class="fu">aes</span>(rank, frequency))<span class="sc">+</span></span>
<span id="cb75-261"><a href="#cb75-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb75-262"><a href="#cb75-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"darkgreen"</span>)<span class="sc">+</span></span>
<span id="cb75-263"><a href="#cb75-263" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb75-264"><a href="#cb75-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()<span class="sc">+</span></span>
<span id="cb75-265"><a href="#cb75-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb75-266"><a href="#cb75-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Observation de la loi de Zipf"</span>,<span class="at">x=</span><span class="st">"log (rang)"</span>,<span class="at">y=</span><span class="st">"log (fréquence)"</span>)</span>
<span id="cb75-267"><a href="#cb75-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-268"><a href="#cb75-268" aria-hidden="true" tabindex="-1"></a><span class="fu"># Mesures de fréquence</span></span>
<span id="cb75-269"><a href="#cb75-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-270"><a href="#cb75-270" aria-hidden="true" tabindex="-1"></a>On s'est pour l'instant intéressé uniquement aux termes les plus fréquents dans un corpus. On a vu comment éliminer les termes trop fréquents pour qu'ils nous apportent de l'information. Pour l'analyse de topics, il nous faut prendre un autre angle d'attaque : afin de détecter les sujets abordés dans un corpus, on ne peut se contenter d'observer les mots les plus fréquents, il faut s'intéresser aux termes dont la fréquence dans l'ensemble du corpus est faible, mais qui contribuent fortement à différencier les éléments du corpus entre eux (les documents). On utilise pour cela une mesure de fréquence pondérée : la *tf-idf* pour *term frequency - inverse document frequency* qui permet d'accorder plus de poids aux termes les plus discriminants du corpus.</span>
<span id="cb75-271"><a href="#cb75-271" aria-hidden="true" tabindex="-1"></a>$tf-idf= \frac{occurrence\ du\ mot\ dans\ le\ document }{nombre\ de\ mots\ dans \ le \ document}* log (\frac{nombre\ de\ documents\ dans\ le\ corpus} {nombre\ de \ documents\ dans\ lequel\ le\ mot\ apparait})$</span>
<span id="cb75-272"><a href="#cb75-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-273"><a href="#cb75-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-274"><a href="#cb75-274" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pondération tf-idf</span></span>
<span id="cb75-275"><a href="#cb75-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-276"><a href="#cb75-276" aria-hidden="true" tabindex="-1"></a>On commence par reprendre nos manipulations précédentes : création de corpus, élimination des stopwords, constitution de bi- ou tri- grammes. On applique ensuite la pondération tf-idf.</span>
<span id="cb75-277"><a href="#cb75-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-278"><a href="#cb75-278" aria-hidden="true" tabindex="-1"></a><span class="in">```{r tf-idf, warning=FALSE}</span></span>
<span id="cb75-279"><a href="#cb75-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-280"><a href="#cb75-280" aria-hidden="true" tabindex="-1"></a>dfmtfidf<span class="ot">&lt;-</span><span class="fu">dfm_tfidf</span>(dfm)</span>
<span id="cb75-281"><a href="#cb75-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-282"><a href="#cb75-282" aria-hidden="true" tabindex="-1"></a>dfmtfidf</span>
<span id="cb75-283"><a href="#cb75-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-284"><a href="#cb75-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-285"><a href="#cb75-285" aria-hidden="true" tabindex="-1"></a><span class="co">#Représentations graphiques</span></span>
<span id="cb75-286"><a href="#cb75-286" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm, <span class="at">max_words =</span> <span class="dv">200</span>)</span>
<span id="cb75-287"><a href="#cb75-287" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfmtfidf, <span class="at">max_words =</span> <span class="dv">200</span>)</span>
<span id="cb75-288"><a href="#cb75-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-289"><a href="#cb75-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-290"><a href="#cb75-290" aria-hidden="true" tabindex="-1"></a><span class="co">#On filtre les mots trop fréquents</span></span>
<span id="cb75-291"><a href="#cb75-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-292"><a href="#cb75-292" aria-hidden="true" tabindex="-1"></a>dfm_trim<span class="ot">&lt;-</span><span class="fu">dfm_trim</span>(dfm, <span class="at">max_termfreq =</span> <span class="dv">500</span>)</span>
<span id="cb75-293"><a href="#cb75-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-294"><a href="#cb75-294" aria-hidden="true" tabindex="-1"></a>dfmtfidf_trim<span class="ot">&lt;-</span><span class="fu">dfm_tfidf</span>(dfm_trim)</span>
<span id="cb75-295"><a href="#cb75-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-296"><a href="#cb75-296" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm_trim, <span class="at">max_words =</span> <span class="dv">200</span>)</span>
<span id="cb75-297"><a href="#cb75-297" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfmtfidf_trim, <span class="at">max_words =</span> <span class="dv">200</span>, <span class="at">color =</span> <span class="fu">brewer.pal</span>(<span class="dv">6</span>, <span class="st">"Set2"</span>))</span>
<span id="cb75-298"><a href="#cb75-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-299"><a href="#cb75-299" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>()</span>
<span id="cb75-300"><a href="#cb75-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-301"><a href="#cb75-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb75-302"><a href="#cb75-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-303"><a href="#cb75-303" aria-hidden="true" tabindex="-1"></a><span class="fu"># Comprendre le sens des termes</span></span>
<span id="cb75-304"><a href="#cb75-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-305"><a href="#cb75-305" aria-hidden="true" tabindex="-1"></a>On peut visualiser un ou plusieurs termes dans leur contexte, afin d'avoir une meilleure compréhension de leur sens. Pour cela on utilise la fonction "kwic" pour key word in context, à partir de l'objet tokens :</span>
<span id="cb75-306"><a href="#cb75-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-307"><a href="#cb75-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r 1_kwic}</span></span>
<span id="cb75-308"><a href="#cb75-308" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"livraison"</span>,<span class="at">window =</span> <span class="dv">3</span>))</span>
<span id="cb75-309"><a href="#cb75-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-310"><a href="#cb75-310" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok, <span class="fu">c</span>(<span class="st">"commande"</span>, <span class="st">"recommande"</span>),<span class="at">window =</span> <span class="dv">3</span>))</span>
<span id="cb75-311"><a href="#cb75-311" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"perroquet"</span>,<span class="at">window =</span> <span class="dv">3</span>))</span>
<span id="cb75-312"><a href="#cb75-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-313"><a href="#cb75-313" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">kwic</span>(tok,<span class="st">"prix"</span>,<span class="at">window=</span><span class="dv">10</span>))</span>
<span id="cb75-314"><a href="#cb75-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-315"><a href="#cb75-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>